<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Judge Case Management System</title>
<style>
body{font-family:Arial,sans-serif;margin:0;background:#f4f6f9;}
header{background:#1f3a5f;color:white;padding:15px;text-align:center;font-size:20px;}
nav{background:#2d6cdf;padding:10px;text-align:center;}
nav button{margin:5px;padding:10px 15px;border:none;background:#fff;color:#2d6cdf;font-weight:bold;border-radius:5px;cursor:pointer;}
section{display:none;padding:15px;}
.active{display:block;}
.card{background:white;padding:15px;margin-bottom:10px;border-radius:6px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
input,select,textarea{width:100%;padding:8px;margin:5px 0;border-radius:4px;border:1px solid #ccc;}
table{width:100%;border-collapse:collapse;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
.green{background:#c8f7c5;}
.yellow{background:#fff3b0;}
.red{background:#f7c5c5;}
.blink{animation:blinker 1s linear infinite;}
@keyframes blinker{50%{opacity:0;}}
.lang-box{margin:20px;padding:20px;border-radius:10px;background:#2d6cdf;color:white;text-align:center;font-size:20px;cursor:pointer;}
</style>
</head>
<body>

<!-- LANGUAGE SELECTION -->
<section id="lang" class="active">
<h2 style="text-align:center">ğŸŒ Select Language</h2>
<div class="lang-box" onclick="setLang('ta')">à®¤à®®à®¿à®´à¯</div>
<div class="lang-box" onclick="setLang('en')">English</div>
<div class="lang-box" onclick="setLang('hi')">à¤¹à¤¿à¤‚à¤¦à¥€</div>
</section>

<header id="head" style="display:none">âš–ï¸ Judge Case Management System</header>

<nav id="menu" style="display:none">
<button onclick="show('dash')">ğŸ“Š Dashboard</button>
<button onclick="show('new')">ğŸ†• New Case</button>
<button onclick="show('all')">ğŸ“‚ All Cases</button>
<button onclick="show('dead')">â³ Deadline Monitor</button>
<button onclick="show('search')">ğŸ” Search</button>
<button onclick="show('export')">ğŸ“¤ Export CSV</button>
<button onclick="show('clear')">ğŸ—‘ Clear Data</button>
</nav>

<!-- DASHBOARD -->
<section id="dash">
<div class="card">
<h3>Dashboard</h3>
<p>Total Cases: <span id="tc">0</span></p>
<p>Pending: <span id="pc">0</span></p>
<p>Hearing/Judgment: <span id="hc">0</span></p>
<p>Closed: <span id="cc">0</span></p>
</div>
</section>

<!-- NEW CASE -->
<section id="new">
<div class="card">
<h3>ğŸ†• Register New Case</h3>
<input id="pet" placeholder="Petitioner">
<input id="res" placeholder="Respondent">
<select id="priority">
<option>High ğŸ”´</option>
<option>Medium ğŸŸ¡</option>
<option>Low ğŸŸ¢</option>
</select>
<select id="status">
<option>Pending â³</option>
<option>Hearing ğŸ•’</option>
<option>Judgment âš–ï¸</option>
<option>Closed âœ…</option>
</select>
<label>Deadline Date:</label>
<input type="date" id="ddl">
<button onclick="addCase()">Save Case</button>
</div>
</section>

<!-- ALL CASES -->
<section id="all">
<div class="card">
<h3>ğŸ“‚ All Cases</h3>
<table>
<thead>
<tr><th>No</th><th>Case No</th><th>Petitioner</th><th>Respondent</th><th>Status</th><th>Priority</th><th>Deadline</th></tr>
</thead>
<tbody id="caseTable"></tbody>
</table>
</div>
</section>

<!-- DEADLINE MONITOR -->
<section id="dead">
<div class="card">
<h3>â³ Deadline Monitor</h3>
<table>
<thead>
<tr><th>Case No</th><th>Status</th><th>Days Left</th></tr>
</thead>
<tbody id="deadTable"></tbody>
</table>
<audio id="alertSound" src="https://www.soundjay.com/button/beep-07.mp3"></audio>
</div>
</section>

<!-- SEARCH -->
<section id="search">
<div class="card">
<h3>ğŸ” Search Case</h3>
<input placeholder="Search by Case / Petitioner / Respondent" onkeyup="searchCase(this.value)">
<div id="searchResult"></div>
</div>
</section>

<!-- EXPORT CSV -->
<section id="export">
<div class="card">
<h3>ğŸ“¤ Export Cases CSV</h3>
<button onclick="exportCSV()">Download CSV</button>
</div>
</section>

<!-- CLEAR DATA -->
<section id="clear">
<div class="card">
<h3>ğŸ—‘ Clear Local Storage</h3>
<button onclick="clearData()">Clear All Cases</button>
</div>
</section>

<script>
// ====== DATA ======
let cases = JSON.parse(localStorage.getItem("cases") || "[]");

// ====== LANGUAGE ======
function setLang(lang){
document.getElementById("lang").style.display="none";
document.getElementById("head").style.display="block";
document.getElementById("menu").style.display="block";
show('dash');
}

// ====== NAVIGATION ======
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
if(id==="all") loadCases();
if(id==="dead") loadDead();
if(id==="dash") dashboard();
}

// ====== ADD CASE ======
function addCase(){
if(!pet.value || !res.value || !ddl.value){
alert("Please fill all fields!");
return;
}
let caseObj = {
no: "CASE-"+(cases.length+1)+"-"+new Date().getFullYear(),
pet: pet.value,
res: res.value,
status: status.value,
priority: priority.value,
ddl: ddl.value,
reg: new Date().toLocaleDateString()
};
cases.push(caseObj);
localStorage.setItem("cases", JSON.stringify(cases));
alert("Case Registered Successfully!");
pet.value=""; res.value=""; ddl.value=""; // clear form
dashboard();
}

// ====== DASHBOARD ======
function dashboard(){
tc.innerText = cases.length;
pc.innerText = cases.filter(c=>c.status.includes("Pending")).length;
hc.innerText = cases.filter(c=>c.status.includes("Hearing") || c.status.includes("Judgment")).length;
cc.innerText = cases.filter(c=>c.status.includes("Closed")).length;
}

// ====== LOAD ALL CASES ======
function loadCases(){
caseTable.innerHTML="";
cases.forEach((c,i)=>{
caseTable.innerHTML += `<tr>
<td>${i+1}</td><td>${c.no}</td><td>${c.pet}</td><td>${c.res}</td><td>${c.status}</td><td>${c.priority}</td><td>${c.ddl}</td></tr>`;
});
}

// ====== DEADLINE MONITOR ======
function loadDead(){
deadTable.innerHTML="";
let today = new Date();
cases.forEach(c=>{
let d = new Date(c.ddl);
if(isNaN(d)) return;
let diff = Math.ceil((d - today)/86400000);
let cls = diff<0 ? "red blink" : diff<=7 ? "yellow blink" : "green";
deadTable.innerHTML += `<tr class="${cls}"><td>${c.no}</td><td>${c.status}</td><td>${diff}</td></tr>`;
if(diff<=7) document.getElementById("alertSound").play();
});
}

// ====== SEARCH ======
function searchCase(val){
searchResult.innerHTML="";
cases.filter(c=>JSON.stringify(c).toLowerCase().includes(val.toLowerCase()))
.forEach(c=>{
searchResult.innerHTML+=`<p>${c.no} - ${c.pet} vs ${c.res} (${c.status}, ${c.priority})</p>`;
});
}

// ====== EXPORT CSV ======
function exportCSV(){
if(cases.length===0){alert("No data to export"); return;}
let csv="Case No,Petitioner,Respondent,Status,Priority,Deadline,Registered\n";
cases.forEach(c=>{
csv += `${c.no},${c.pet},${c.res},${c.status},${c.priority},${c.ddl},${c.reg}\n`;
});
let blob = new Blob([csv],{type:"text/csv"});
let link = document.createElement("a");
link.href = URL.createObjectURL(blob);
link.download="Judge_Cases.csv";
document.body.appendChild(link);
link.click();
document.body.removeChild(link);
}

// ====== CLEAR DATA ======
function clearData(){
if(confirm("Are you sure to delete all cases?")){
cases=[]; localStorage.clear(); dashboard(); caseTable.innerHTML=""; deadTable.innerHTML=""; searchResult.innerHTML="";
alert("All data cleared!");
}
}

// ====== INIT ======
dashboard();
</script>

</body>
</html>
